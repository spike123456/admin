!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,a=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(s){c=!0,i=s}finally{try{o||null==r.return||r.return()}finally{if(c)throw i}}return a}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{0:function(e,t,r){e.exports=r("zUnb")},1:function(e,t){},"9ko8":function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r("mrSG"),i=r("7Cbv"),a=r("IheW"),c=r("3y9D"),u=r("i0WE"),d=r("2Vo4"),f=r("N4yJ"),h=r("KM76"),l=r("8Y7J"),p=function(){var e=function(){function e(t,r,n){o(this,e),this.http=t,this.authService=r,this.slackService=n}return s(e,[{key:"uploadVideo",value:function(e){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new d.a(0),t.t0=this.http,t.t1="https://api.github.com/repos/spike123456/video1/contents/".concat(Object(i.a)(),".mp4"),t.t2={name:"Admin",email:"admin@netifan.net"},t.next=6,Object(f.f)(e);case 6:return t.t3=t.sent,t.t4={message:"Add new video",committer:t.t2,content:t.t3},t.t5={reportProgress:!0,observe:"events",headers:{authorization:"Bearer ".concat(this.authService.tokenGit),accept:"application/vnd.github+json"}},t.t0.put.call(t.t0,t.t1,t.t4,t.t5).subscribe(function(e){if(4===e.type)try{var t=e.body;r.next([t.content.download_url,t.content.sha])}catch(n){}else void 0!==e.loaded&&void 0!==e.total&&r.next(Math.round(100*e.loaded/e.total))}),t.abrupt("return",r);case 11:case"end":return t.stop()}},t,this)}))}},{key:"removeVideo",value:function(e,t){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var i=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(r,a){return Object(n.__awaiter)(i,void 0,void 0,regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{i=this.http.request("delete","https://api.github.com/repos/spike123456/video1/contents/".concat(e,".mp4"),{body:{message:"Remove video",committer:{name:"Admin",email:"admin@netifan.net"},sha:t},headers:{authorization:"Bearer ".concat(this.authService.tokenGit),accept:"application/vnd.github+json"}}).subscribe(function(e){r(),i.unsubscribe()})}catch(a){}case 1:case"end":return n.stop()}},n,this)}))}));case 1:case"end":return r.stop()}},r)}))}},{key:"doUploadImage",value:function(e,t,r){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o,s,u,d,f,h=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.authService.retrieveConfig();case 2:return o=n.sent,n.next=5,this.authService.retrieveCloudinary(o.cloudinary);case 5:s=n.sent,u=new FormData,d=Math.round((new Date).getTime()/1e3),f="".concat(r,"-").concat(Object(i.a)()),u.append("file",e),u.append("timestamp",d.toString()),u.append("public_id",f),u.append("api_key",s.apiKey),u.append("signature",c("public_id=".concat(f,"&timestamp=").concat(d).concat(s.apiSecret)).toString()),this.http.post("https://api.cloudinary.com/v1_1/".concat(s.asset,"/image/upload"),u,{reportProgress:!0,observe:"events"}).subscribe(function(e){if(e instanceof a.c){if(h.isEdit)try{h.slackService.sendMsg("Uploaded new image ".concat(s.asset,": ").concat(e.body.secure_url))}catch(r){}try{t.next(e.body.secure_url)}catch(r){}}else void 0!==e.loaded&&void 0!==e.total&&t.next(Math.round(100*e.loaded/e.total))});case 10:case"end":return n.stop()}},n,this)}))}},{key:"gifUploadImage",value:function(e,t){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n,i,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.authService.retrieveConfig();case 2:return n=r.sent,r.next=5,this.authService.retrieveImgurg(n.imgurg);case 5:i=r.sent,(o=new FormData).append("image",e),o.append("type","file"),this.http.post("https://api.imgur.com/3/image",o,{reportProgress:!0,observe:"events",headers:{authorization:"Client-ID ".concat(i.clientId)}}).subscribe(function(e){if(e instanceof a.c)try{var r=e.body.data;t.next("".concat(r.link,"|").concat(r.deletehash))}catch(n){}else void 0!==e.loaded&&void 0!==e.total&&t.next(Math.round(100*e.loaded/e.total))});case 8:case"end":return r.stop()}},r,this)}))}},{key:"uploadImage",value:function(e,t,r){var n=new d.a(0);return t?this.gifUploadImage(e,n):this.doUploadImage(e,n,Object(f.m)(r||"a")),n}},{key:"removeImage",value:function(e,t){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var i=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(r,a){return Object(n.__awaiter)(i,void 0,void 0,regeneratorRuntime.mark(function n(){var i,a,o,s,u=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.authService.retrieveCloudinary(t);case 2:i=n.sent,a=new FormData,o=Math.round((new Date).getTime()/1e3),a.append("timestamp",o.toString()),a.append("public_id",e),a.append("api_key",i.apiKey),a.append("signature",c("public_id=".concat(e,"&timestamp=").concat(o).concat(i.apiSecret)).toString()),s=this.http.post("https://api.cloudinary.com/v1_1/".concat(i.asset,"/image/destroy"),a).subscribe(function(t){u.isEdit&&u.slackService.sendMsg("Removed image ".concat(i.asset,": ").concat(e)),r(),s.unsubscribe()});case 7:case"end":return n.stop()}},n,this)}))}));case 1:case"end":return r.stop()}},r)}))}},{key:"removeGifImage",value:function(e,t){var r=this;return new Promise(function(i,a){return Object(n.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var n,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.authService.retrieveImgurg(t);case 2:n=r.sent,a=this.http.delete("https://api.imgur.com/3/image/".concat(e),{headers:{authorization:"Client-ID ".concat(n.clientId)}}).subscribe(function(e){i(),a.unsubscribe()});case 4:case"end":return r.stop()}},r,this)}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.a),l.Zb(u.a),l.Zb(h.a))},e.\u0275prov=l.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Gqa0:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r("mrSG"),a=r("oE1f"),c=r("N4yJ"),u=function(){function e(t){o(this,e),this.batch=t,this.array=[]}return s(e,[{key:"append",value:function(e){return this.array.push(e),this}},{key:"run",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.array.length){e.next=27;break}t=n(this.array),e.prev=2,t.s();case 4:if((r=t.n()).done){e.next=16;break}i=r.value,e.t0=i.type,e.next=e.t0===a.a.Set?9:e.t0===a.a.Update?11:e.t0===a.a.Delete?13:14;break;case 9:return this.batch.set(i.doc,Object(c.n)(i.data)),e.abrupt("break",14);case 11:return this.batch.update(i.doc,Object(c.n)(i.data)),e.abrupt("break",14);case 13:this.batch.delete(i.doc);case 14:e.next=4;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(2),t.e(e.t1);case 21:return e.prev=21,t.f(),e.finish(21);case 24:return e.next=26,this.batch.commit();case 26:return e.abrupt("return",!0);case 27:return e.abrupt("return",!1);case 28:case"end":return e.stop()}},e,this,[[2,18,21,24]])}))}}]),e}()},JmXk:function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r("mrSG"),i=r("i2ga"),a=r("wdqL"),c=r("i0WE"),u=r("8Y7J"),d=r("IheW"),f=function(){var e=function(){function e(t,r){o(this,e),this.http=t,this.authService=r,this.feedbackMap=new Map,this.totalFeedback=0}return s(e,[{key:"getAllPendingFeedbacks",value:function(e){var t=this;return new Promise(function(r,o){return Object(n.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o,c=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.feedbackMap.has(e)){t.next=4;break}r([this.totalFeedback,this.feedbackMap.get(e)]),t.next=8;break;case 4:return t.next=6,this.authService.retrieveUser();case 6:n=t.sent,o=this.http.get("".concat(i.a.BASE_URL).concat(i.a.Feedbacks),{headers:{authorization:n.token}}).subscribe(function(t){var n=t.data.map(function(e){var t;return Object.assign(Object.assign({},e),{reason:(null===(t=a.a.Abuse.find(function(t){return t.id===e.reasonId}))||void 0===t?void 0:t.content)||""})});c.feedbackMap.set(e,n),c.totalFeedback=t.total,r([t.total,n]),o.unsubscribe()},function(e){r([0,[]]),o.unsubscribe()});case 8:case"end":return t.stop()}},t,this)}))})}},{key:"approveComment",value:function(e){var t=this;return new Promise(function(r,a){return Object(n.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.authService.retrieveUser();case 2:n=t.sent,a=this.http.delete("".concat(i.a.BASE_URL).concat(i.a.ApproveFeedback.replace(":id",e)),{headers:{authorization:n.token}}).subscribe(function(e){r(),a.unsubscribe()},function(e){r(),a.unsubscribe()});case 4:case"end":return t.stop()}},t,this)}))})}},{key:"rejectComment",value:function(e){var t=this;return new Promise(function(r,a){return Object(n.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.authService.retrieveUser();case 2:n=t.sent,a=this.http.delete("".concat(i.a.BASE_URL).concat(i.a.RejectFeedback.replace(":id",e)),{headers:{authorization:n.token}}).subscribe(function(e){r(),a.unsubscribe()},function(e){r(),a.unsubscribe()});case 4:case"end":return t.stop()}},t,this)}))})}},{key:"deleteComment",value:function(e,t){var r=this;return new Promise(function(a,o){return Object(n.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.authService.retrieveUser();case 2:n=r.sent,o=this.http.delete("".concat(i.a.BASE_URL).concat(i.a.DeleteComment.replace(":id",e).replace(":commentId",t)),{headers:{authorization:n.token}}).subscribe(function(e){a(),o.unsubscribe()},function(e){a(),o.unsubscribe()});case 4:case"end":return r.stop()}},r,this)}))})}},{key:"approve",value:function(e,t){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return this.feedbackMap.clear(),r.next=3,Promise.all([this.approveComment(t),this.deleteComment(e,t)]);case 3:return r.abrupt("return",this.getAllPendingFeedbacks(1));case 4:case"end":return r.stop()}},r,this)}))}},{key:"reject",value:function(e){return Object(n.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.feedbackMap.clear(),t.next=3,this.rejectComment(e);case 3:return t.abrupt("return",this.getAllPendingFeedbacks(1));case 4:case"end":return t.stop()}},t,this)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Zb(d.a),u.Zb(c.a))},e.\u0275prov=u.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},KM76:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r("i2ga"),i=r("8Y7J"),a=r("IheW"),c=function(){var e=function(){function e(t){o(this,e),this.http=t}return s(e,[{key:"sendMsg",value:function(e){var t=this.http.post("".concat(n.c.BASE_URL).concat(n.c.Noti),{text:e},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).subscribe(function(e){t.unsubscribe()},function(e){t.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Zb(a.a))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},N4yJ:function(e,t,n){"use strict";n.d(t,"g",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return f}),n.d(t,"n",function(){return h}),n.d(t,"e",function(){return l}),n.d(t,"j",function(){return p}),n.d(t,"i",function(){return v}),n.d(t,"o",function(){return b}),n.d(t,"m",function(){return m}),n.d(t,"h",function(){return w}),n.d(t,"k",function(){return k}),n.d(t,"l",function(){return y}),n.d(t,"f",function(){return x});var i=n("mrSG"),a=n("JZFu");function o(e,t){var r=this;return new Promise(function(n,a){return Object(i.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=new FileReader,"string"!=typeof e){r.next=7;break}return r.next=4,function(e){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return t.abrupt("return",t.sent.blob());case 3:case"end":return t.stop()}},t)}))}(e);case 4:r.t0=r.sent,r.next=8;break;case 7:r.t0=void 0;case 8:o=r.t0,a.onloadend=function(e){var r=new Image;r.src=a.result,r.onload=function(){var e=r.width,i=r.height;if(t)n(r.width>r.height&&e>1e3?[c(r,1e3,1e3*i/e),e>i]:[o,r.width>r.height]);else{var a=r.width>r.height;n((r.width>r.height?r.width:r.height)>1500?[c(r,a?1500:1500*e/i,a?1500*i/e:1500),e>i]:[o,r.width>r.height])}}},a.readAsDataURL(o||e);case 10:case"end":return r.stop()}},r)}))})}function c(e,t,r){var n=document.createElement("canvas");return n.width=t,n.height=r,n.getContext("2d").drawImage(e,0,0,t,r),function(e){if(-1==e.indexOf(";base64,")){var t=e.split(","),r=t[0].split(":")[1];return new Blob([t[1]],{type:r})}for(var n=e.split(";base64,"),i=n[0].split(":")[1],a=window.atob(n[1]),o=a.length,c=new Uint8Array(o),s=0;s<o;++s)c[s]=a.charCodeAt(s);return new Blob([c],{type:i})}(n.toDataURL("image/png"))}function s(e){return e.replace("upload/","upload/q_auto:best/").replace(".jpg",".webp").replace(".jpeg",".webp").replace(".png",".webp")}function u(e){var t=e.split("/");return"https://".concat(t[3],".netifan.net/").concat(t[t.length-1]).replace(".jpg",".jpeg").replace(".webp",".png")}function d(e){return u(e).replace(".jpeg",".webp").replace(".png",".webp")}function f(e){return e.replace(".webp",".png")}function h(e){var t={};return Object.keys(e).forEach(function(n){e[n]instanceof a.a.firestore.FieldValue&&(t=Object.assign(Object.assign({},t),r({},n,e[n])))}),Object.assign(Object.assign({},JSON.parse(JSON.stringify(e))),t)}function l(e){return Array.from(Array(e.length).keys()).map(function(t){return e.slice(0,t+1)})}function p(e){return void 0!==e.lastTime}function v(e){return void 0!==e.id}function b(e){var t=this;return new Promise(function(r,n){return Object(i.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout(function(){return r()},e);case 1:case"end":return t.stop()}},t)}))})}function m(e){for(var t,r="",n=0;n<e.length;n++){var i=e.charAt(n);(t=i).match(/^[0-9a-zA-Z]+$/)||t in g?r+=i in g?g[i]:i:r+="-"}return"-"===(r=r.replace(/(-)+/g,"-")).charAt(r.length-1)&&(r=r.substring(0,r.length-1)),"-"===r.charAt(0)&&(r=r.substring(1)),r}var g={"\xe9":"e","\xe8":"e","\u1ebb":"e","\u1ebd":"e","\u1eb9":"e","\xea":"e","\u1ebf":"e","\u1ec1":"e","\u1ec3":"e","\u1ec5":"e","\u1ec7":"e","\xfd":"y","\u1ef3":"y","\u1ef7":"y","\u1ef9":"y","\u1ef5":"y","\xfa":"u","\xf9":"u","\u1ee7":"u","\u0169":"u","\u1ee5":"u","\u01b0":"u","\u1ee9":"u","\u1eeb":"u","\u1eed":"u","\u1eef":"u","\u1ef1":"u","\xed":"i","\xec":"i","\u1ec9":"i","\u0129":"i","\u1ecb":"i","\xf3":"o","\xf2":"o","\u1ecf":"o","\xf5":"o","\u1ecd":"o","\xf4":"o","\u1ed1":"o","\u1ed3":"o","\u1ed5":"o","\u1ed7":"o","\u1ed9":"o","\u01a1":"o","\u1edb":"o","\u1edd":"o","\u1edf":"o","\u1ee1":"o","\u1ee3":"o","\xe1":"a","\xe0":"a","\u1ea3":"a","\xe3":"a","\u1ea1":"a","\xe2":"a","\u1ea5":"a","\u1ea7":"a","\u1ea9":"a","\u1eab":"a","\u1ead":"a","\u0103":"a","\u1eaf":"a","\u1eb1":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\u0111":"d","\xc9":"E","\xc8":"E","\u1eba":"E","\u1ebc":"E","\u1eb8":"E","\xca":"E","\u1ebe":"E","\u1ec0":"E","\u1ec2":"E","\u1ec4":"E","\u1ec6":"E","\xdd":"Y","\u1ef2":"Y","\u1ef6":"Y","\u1ef8":"Y","\u1ef4":"Y","\xda":"U","\xd9":"U","\u1ee6":"U","\u0168":"U","\u1ee4":"U","\u01af":"U","\u1ee8":"U","\u1eea":"U","\u1eec":"U","\u1eee":"U","\u1ef0":"U","\xcd":"I","\xcc":"I","\u1ec8":"I","\u0128":"I","\u1eca":"I","\xd3":"O","\xd2":"O","\u1ece":"O","\xd5":"O","\u1ecc":"O","\xd4":"O","\u1ed0":"O","\u1ed2":"O","\u1ed4":"O","\u1ed6":"O","\u1ed8":"O","\u01a0":"O","\u1eda":"O","\u1edc":"O","\u1ede":"O","\u1ee0":"O","\u1ee2":"O","\xc1":"A","\xc0":"A","\u1ea2":"A","\xc3":"A","\u1ea0":"A","\xc2":"A","\u1ea4":"A","\u1ea6":"A","\u1ea8":"A","\u1eaa":"A","\u1eac":"A","\u0102":"A","\u1eae":"A","\u1eb0":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\u0110":"D"};function w(e){if(e&&(e.includes("youtube.com")||e.includes("youtu.be"))){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return t&&11===t[7].length?t[7]:void 0}}function k(e){return"string"!=typeof e&&e.name.endsWith("gif")}function y(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))&&0==e.toDataURL("image/webp").indexOf("data:image/webp")}function x(e){return new Promise(function(t,r){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){t(n.result.replaceAll("data:video/mp4;base64,",""))},n.onerror=function(e){t(void 0)}})}},Y3B2:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function e(t,r,n){o(this,e),this.doc=t,this.type=r,this.data=n}},Z93F:function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r("mrSG"),i=r("i2ga"),a=r("N4yJ"),c=r("i0WE"),u=r("8Y7J"),d=r("IheW"),f=function(){var e=function(){function e(t,r){o(this,e),this.http=t,this.authService=r,this.canSupportWebP=Object(a.l)()}return s(e,[{key:"updateStage",value:function(e,t){var r=this;return new Promise(function(a,o){return Object(n.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.authService.retrieveUser();case 2:n=r.sent,o=this.http.put("".concat(i.a.BASE_URL).concat(i.a.Stage.replace(":id",e)),{stage:t},{headers:{authorization:n.token}}).subscribe(function(e){a(),o.unsubscribe()},function(e){a(),o.unsubscribe()});case 4:case"end":return r.stop()}},r,this)}))})}},{key:"updateSlider",value:function(e,t){var r=this;return new Promise(function(a,o){return Object(n.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.authService.retrieveUser();case 2:n=r.sent,o=this.http.put("".concat(i.a.BASE_URL).concat(i.a.Slider.replace(":id",e)),{slider:t},{headers:{authorization:n.token}}).subscribe(function(e){a(),o.unsubscribe()},function(e){a(),o.unsubscribe()});case 4:case"end":return r.stop()}},r,this)}))})}},{key:"updateFeatured",value:function(e,t){var r=this;return new Promise(function(a,o){return Object(n.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.authService.retrieveUser();case 2:n=r.sent,o=this.http.put("".concat(i.a.BASE_URL).concat(i.a.Featured.replace(":id",e)),{featured:t},{headers:{authorization:n.token}}).subscribe(function(e){a(),o.unsubscribe()},function(e){a(),o.unsubscribe()});case 4:case"end":return r.stop()}},r,this)}))})}},{key:"clearHtmlCache",value:function(){var e=this;return new Promise(function(t,r){return Object(n.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.retrieveUser();case 2:r=e.sent,n=this.http.delete("".concat(i.a.BASE_URL).concat(i.a.ClearHtmlCache),{headers:{authorization:r.token}}).subscribe(function(e){t(!0),n.unsubscribe()},function(e){t(!1),n.unsubscribe()});case 4:case"end":return e.stop()}},e,this)}))})}},{key:"updateBackup",value:function(e,t){var r=this;return new Promise(function(a,o){return Object(n.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.authService.retrieveUser();case 2:n=r.sent,o=this.http.put("".concat(i.a.BASE_URL).concat(i.a.Backup.replace(":id",e)),{data:t},{headers:{authorization:n.token}}).subscribe(function(e){a(!0),o.unsubscribe()},function(e){a(!1),o.unsubscribe()});case 4:case"end":return r.stop()}},r,this)}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Zb(d.a),u.Zb(c.a))},e.\u0275prov=u.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},d2mR:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("SVse"),i=r("8Y7J"),a=function(){var e=function e(){o(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({imports:[[n.c],n.c]}),e}()},i0WE:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("mrSG"),a=n("2Vo4"),c=n("i2ga"),u=n("N4yJ"),d=n("8Y7J"),f=n("wD+u"),h=n("VRCc"),l=n("LC/r"),p=n("IheW"),v=function(){var e=function(){function e(t,r,n,i){o(this,e),this.afs=t,this.afAuth=r,this.aRC=n,this.http=i,this.firebaseUser=null,this.userChanges=new a.a(void 0)}return s(e,[{key:"getValidTime",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.isTimeValid){e.next=4;break}e.t0=this.isTimeValid,e.next=7;break;case 4:return e.next=6,Object(u.o)(50);case 6:e.t0=this.getValidTime();case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e,this)}))}},{key:"retrieveConfig",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.config,e.t0){e.next=14;break}return e.next=4,this.aRC.settings;case 4:return e.sent.minimumFetchIntervalMillis=18e5,e.next=7,this.aRC.fetchAndActivate();case 7:return e.next=9,this.aRC.getString("cloudinary");case 9:return e.t1=e.sent,e.next=12,this.aRC.getString("imgurg");case 12:e.t2=e.sent,this.config={cloudinary:e.t1,imgurg:e.t2};case 14:return e.abrupt("return",this.config);case 15:case"end":return e.stop()}},e,this)}))}},{key:"retrieveCloudinary",value:function(e){var t=this;return new Promise(function(r,n){return Object(i.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.cloudinary,t.t0){t.next=4;break}return t.next=4,this.fetchCredential();case 4:r(this.cloudinary[e]);case 5:case"end":return t.stop()}},t,this)}))})}},{key:"retrieveImgurg",value:function(e){var t=this;return new Promise(function(r,n){return Object(i.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.imgurg,t.t0){t.next=4;break}return t.next=4,this.fetchCredential();case 4:r(this.imgurg[e]);case 5:case"end":return t.stop()}},t,this)}))})}},{key:"fetchCredential",value:function(){var e=this;return new Promise(function(t,r){return Object(i.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.http.get("".concat(c.d.BASE_URL).concat(c.d.Credential),{headers:{"x-key":"hxLCPL8BuV"}}).subscribe(function(e){r.cloudinary=e.service.cloudinary,r.imgurg=e.service.imgurg,r.isTimeValid=Math.abs(e.time-(new Date).getTime())<=3e3,r.tokenGit=e.git,t()});case 1:case"end":return e.stop()}},e,this)}))})}},{key:"retrieveUser",value:function(){var e=this;return this.cloudinary&&this.imgurg||this.fetchCredential(),new Promise(function(t,r){return Object(i.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var r,n,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.user||!this.firebaseUser){e.next=7;break}return e.next=3,this.firebaseUser.getIdToken(!0);case 3:r=e.sent,this.user.token=r,t(this.user),e.next=8;break;case 7:n=this.afAuth.authState.subscribe(function(e){if(e)var r=a.afs.collection("users").doc(e.uid).get().subscribe(function(n){return Object(i.__awaiter)(a,void 0,void 0,regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this.firebaseUser=e,i.t0=this,i.t1=Object,i.t2=Object.assign({},n.data()),i.t3=e.uid,i.next=7,e.getIdToken(!0);case 7:i.t4=i.sent,i.t5={id:i.t3,token:i.t4},i.t6=i.t1.assign.call(i.t1,i.t2,i.t5),i.t0.update.call(i.t0,i.t6),t(this.user),r.unsubscribe();case 13:case"end":return i.stop()}},i,this)}))});else t(void 0);n.unsubscribe()});case 8:case"end":return e.stop()}},e,this)}))})}},{key:"retrieveUserByIds",value:function(e){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.next=3,Promise.all(e.map(function(e){return i.retrieveUserById(e)}));case 3:return t.sent.forEach(function(t,i){t&&(n=Object.assign(Object.assign({},n),r({},e[i],t)))}),t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}))}},{key:"retrieveAllUsers",value:function(){var e=this;return new Promise(function(t,r){return Object(i.__awaiter)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.allUsers){e.next=4;break}t(this.allUsers),e.next=9;break;case 4:return e.next=6,this.afs.collection("users").ref.get();case 6:r=e.sent,n=[],r.forEach(function(e){n.push(Object.assign(Object.assign({},e.data()),{id:e.id}))}),this.allUsers=n,t(n);case 9:case"end":return e.stop()}},e,this)}))})}},{key:"retrieveUserById",value:function(e){var t=this;return new Promise(function(r,n){return Object(i.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.afs.collection("users").doc(e).get().subscribe(function(e){r(e.data()),n.unsubscribe()});case 1:case"end":return t.stop()}},t,this)}))})}},{key:"login",value:function(e,t){var r=this;return new Promise(function(n,a){return Object(i.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.afAuth.signInWithEmailAndPassword(e,t);case 3:a=r.sent,this.afs.collection("users").doc(a.user.uid).get().subscribe(function(e){return Object(i.__awaiter)(o,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.firebaseUser=a.user,t.t0=this,t.t1=Object,t.t2=Object.assign({},e.data()),t.t3=a.user.uid,t.next=7,a.user.getIdToken();case 7:t.t4=t.sent,t.t5={id:t.t3,token:t.t4},t.t6=t.t1.assign.call(t.t1,t.t2,t.t5),t.t0.update.call(t.t0,t.t6),n(!0);case 12:case"end":return t.stop()}},t,this)}))}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),n(!1);case 10:case"end":return r.stop()}},r,this,[[0,7]])}))})}},{key:"logout",value:function(){return Object(i.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.update(void 0),this.firebaseUser=null,e.next=4,this.afAuth.signOut();case 4:case"end":return e.stop()}},e,this)}))}},{key:"update",value:function(e){this.user=e,this.userChanges.next(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Zb(f.a),d.Zb(h.a),d.Zb(l.a),d.Zb(p.a))},e.\u0275prov=d.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},i2ga:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),r.d(t,"d",function(){return a}),r.d(t,"c",function(){return o});var n={BASE_URL:"https://backup.netifan.net",Category:"/public/v1/category",Post:"/admin/v1/article",GetArticle:"/admin/v1/article/:id",Articles:"/admin/v1/articles",Feedbacks:"/admin/v1/feedbacks",ApproveFeedback:"/admin/v1/feedback/approve/comment/:id",RejectFeedback:"/admin/v1/feedback/reject/comment/:id",DeleteComment:"/admin/v1/article/:id/comment/:commentId",Stage:"/admin/v1/stage/article/:id",Slider:"/admin/v1/slider/article/:id",Featured:"/admin/v1/featured/article/:id",ClearHtmlCache:"/admin/v1/html",Backup:"/admin/v1/article/:id/backup-url"},i={MAIN_BASE_URL:"https://api.netifan.net",Product:"/public/v1/article/:id"},a={BASE_URL:"https://config.netifan.workers.dev",Credential:"/credential"},o={BASE_URL:"https://hooks.slack.com",Noti:"/services/T0220EW16TC/B03N8AG3Q14/mOuJ7LLzPciyMaIkioQdqUwh"}},kLt5:function(r,i,a){"use strict";a.d(i,"a",function(){return g});var c=a("mrSG"),u=a("2Vo4"),d=a("l5mm"),f=a("6eBy"),h=a("oE1f"),l=a("Y3B2"),p=a("Gqa0"),v=a("N4yJ"),b=a("8Y7J"),m=a("wD+u"),g=function(){var r=function(){function r(e){var t=this;o(this,r),this.afs=e,this.tagChanges=new u.a([]),this.valueChanges=new u.a(""),this.valueChanges.pipe(Object(f.a)(function(){return Object(d.a)(1e3)})).subscribe(function(e){return t.getData(e)})}return s(r,[{key:"getSuggestion",value:function(e){this.valueChanges.next(e)}},{key:"getData",value:function(e){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e){r.next=8;break}return r.next=3,this.afs.collection("tags").ref.where("keys","array-contains-any",[e.toLowerCase().trim()]).limit(5).get();case 3:n=r.sent,i=[],n.forEach(function(e){try{i=[].concat(t(i),t(e.data().name))}catch(r){}}),this.tagChanges.next(i),r.next=9;break;case 8:this.tagChanges.next([]);case 9:case"end":return r.stop()}},r,this)}))}},{key:"getTagByName",value:function(e){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){return Object(c.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:this.afs.collection("tags").doc(e.toLowerCase()).get().subscribe(function(r){t(r.exists?[e,r.data().name]:[e,void 0])});case 1:case"end":return r.stop()}},r,this)}))}));case 1:case"end":return t.stop()}},t)}))}},{key:"addSuggestion",value:function(r){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var a,o,c,s,u,d,f,b,m=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(r.length>0)){i.next=9;break}return i.next=3,Promise.all(r.map(function(e){return m.getTagByName(e)}));case 3:a=i.sent,o=new p.a(this.afs.firestore.batch()),c=n(a);try{for(c.s();!(s=c.n()).done;)u=s.value,d=e(u,2),f=d[0],(b=d[1])?b.includes(f)||o.append(new l.a(this.afs.collection("tags").doc(f.toLowerCase()).ref,h.a.Update,{name:[].concat(t(b),[f])})):o.append(new l.a(this.afs.collection("tags").doc(f.toLowerCase()).ref,h.a.Set,{keys:Object(v.e)(f.toLowerCase()),name:[f]}))}catch(g){c.e(g)}finally{c.f()}return i.next=9,o.run();case 9:case"end":return i.stop()}},i,this)}))}}]),r}();return r.\u0275fac=function(e){return new(e||r)(b.Zb(m.a))},r.\u0275prov=b.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},oE1f:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a});var n=function(e){return e.Pending="pending",e.Approved="approved",e}({}),i=function(e){return e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.Delete=2]="Delete",e}({}),a=function(e){return e[e.Stage=0]="Stage",e[e.Slider=1]="Slider",e[e.Featured=2]="Featured",e}({})},qPgb:function(r,n,i){"use strict";i.d(n,"a",function(){return k});var a=i("mrSG"),c=i("i0WE"),u=i("JZFu"),d=i("Gqa0"),f=i("Y3B2"),h=i("oE1f"),l=i("9ko8"),p=i("i2ga"),v=i("wdqL"),b=i("8Y7J"),m=i("wD+u"),g=i("IheW"),w=i("iInd"),k=function(){var r=function(){function r(e,t,n,i,a){o(this,r),this.afs=e,this.http=t,this.authService=n,this.imageService=i,this.router=a,this.totalApproved=0,this.approvedMap=new Map}return s(r,[{key:"getCategories",value:function(){var e=this;return new Promise(function(t,r){if(e.categories)t(e.categories);else var n=e.http.get("".concat(p.a.BASE_URL).concat(p.a.Category)).subscribe(function(r){e.categories=r.data,t(e.categories),n.unsubscribe()})})}},{key:"extractTags",value:function(e){var t=this;return this.draft?e.filter(function(e){return!t.draft[1].tags.includes(e)}):e}},{key:"updateMainImage",value:function(t){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n,i,a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.draft){r.next=12;break}return n=e(this.draft,2),i=n[0],a=n[1],r.t0=t,r.next=7,this.authService.retrieveConfig();case 7:return r.t1=r.sent.cloudinary,o={url:r.t0,provider:r.t1},r.next=11,this.afs.collection("drafts").doc(i).update({image:o});case 11:a.image=o;case 12:case"end":return r.stop()}},r,this)}))}},{key:"getArticleById",value:function(e){var t=this;return new Promise(function(r,n){return Object(a.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.http,t.t1="".concat(p.a.BASE_URL).concat(p.a.GetArticle.replace(":id",e)),t.next=4,this.authService.retrieveUser();case 4:t.t2=t.sent.token,t.t3={authorization:t.t2},t.t4={headers:t.t3},n=t.t0.get.call(t.t0,t.t1,t.t4).subscribe(function(e){i.article=e.data,r(i.article),n.unsubscribe()},function(e){r(void 0)});case 8:case"end":return t.stop()}},t,this)}))})}},{key:"getDraftById",value:function(e){var t=this;return new Promise(function(r,n){return Object(a.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.afs.collection("drafts").doc(e).get().subscribe(function(e){return Object(a.__awaiter)(i,void 0,void 0,regeneratorRuntime.mark(function t(){var i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.exists){t.next=6;break}return i=e.data(),t.next=4,this.authService.retrieveUser();case 4:a=t.sent,!i.review&&i.owner===a.id||i.review&&a.isAdmin?(this.draft=[e.id,i],r(i)):r(void 0);case 6:n.unsubscribe();case 7:case"end":return t.stop()}},t,this)}))});case 1:case"end":return t.stop()}},t,this)}))})}},{key:"getAllDrafts",value:function(){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.drafts){e.next=2;break}return e.abrupt("return",this.drafts);case 2:return e.prev=2,e.t0=this.afs.collection("drafts").ref,e.next=6,this.authService.retrieveUser();case 6:return e.t1=e.sent.id,e.next=9,e.t0.where.call(e.t0,"owner","==",e.t1).where("review","==",null).orderBy("lastTime","desc").get();case 9:return t=e.sent,r=[],e.abrupt("return",(t.forEach(function(e){r.push([e.id,e.data()])}),this.drafts=r,r));case 14:return e.prev=14,e.t2=e.catch(2),e.abrupt("return",[]);case 17:case"end":return e.stop()}},e,this,[[2,14]])}))}},{key:"getAllPendings",value:function(){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.pending){t.next=2;break}return t.abrupt("return",this.pending);case 2:return t.prev=2,t.next=5,this.authService.retrieveUser();case 5:if(!(r=t.sent).isAdmin){t.next=12;break}return t.next=9,this.afs.collection("drafts").ref.where("review","!=",null).get();case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,this.afs.collection("drafts").ref.where("owner","==",r.id).where("review","!=",null).get();case 14:t.t0=t.sent;case 15:if(n=t.t0,i=[],n.forEach(function(e){i.push([e.id,e.data()])}),!r.isAdmin){t.next=22;break}return t.next=20,this.authService.retrieveUserByIds(Array.from(new Set(i.map(function(t){return e(t,2)[1].owner}))));case 20:a=t.sent,i.forEach(function(t){var r=e(t,2)[1];r.owner in a&&(r.ownerName=a[r.owner].name)});case 22:return t.abrupt("return",(this.pending=i.sort(function(t,r){var n=e(t,2)[1];return e(r,2)[1].lastTime.toMillis()-n.lastTime.toMillis()}),this.pending));case 25:return t.prev=25,t.t1=t.catch(2),t.abrupt("return",[]);case 28:case"end":return t.stop()}},t,this,[[2,25]])}))}},{key:"getBlockById",value:function(e){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){return Object(a.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=this.afs.collection("blocks").doc(e).get().subscribe(function(e){t(e.data()),n.unsubscribe()});case 1:case"end":return r.stop()}},r,this)}))}));case 1:case"end":return t.stop()}},t)}))}},{key:"getBlocksByIds",value:function(e){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map(function(e){return r.getBlockById(e)}));case 2:return t.abrupt("return",t.sent.map(function(t,r){return Object.assign(Object.assign(Object.assign({},t),{id:e[r],showRemove:!0}),"Video"===t.type&&t.youtubeCacheLink?{youtubeCacheLink:"https://www.youtube.com/watch?v=".concat(t.youtubeCacheLink)}:{})}));case 3:case"end":return t.stop()}},t)}))}},{key:"createBlock",value:function(e){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(a.__rest)(e,["id","isChangedHtml"]),t.next=3,this.afs.collection("blocks").add(r);case 3:return t.abrupt("return",t.sent.id);case 4:case"end":return t.stop()}},t,this)}))}},{key:"removeBlock",value:function(t){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n,i,a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.draft){r.next=5;break}return n=e(this.draft,2),i=n[0],a=n[1],o=a.blocks.filter(function(e){return e!==t}),r.next=4,new d.a(this.afs.firestore.batch()).append(new f.a(this.afs.collection("drafts").doc(i).ref,h.a.Update,{blocks:o,lastTime:u.a.firestore.FieldValue.serverTimestamp()})).append(new f.a(this.afs.collection("blocks").doc(t).ref,h.a.Delete)).run();case 4:this.draft[1].blocks=o;case 5:case"end":return r.stop()}},r,this)}))}},{key:"addBlocks",value:function(r){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,a,o,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.draft){n.next=5;break}return i=e(this.draft,2),a=i[0],o=i[1],c=[].concat(t(o.blocks),t(r)),n.next=4,this.afs.collection("drafts").doc(a).update({blocks:c,lastTime:u.a.firestore.FieldValue.serverTimestamp()});case 4:o.blocks=c;case 5:case"end":return n.stop()}},n,this)}))}},{key:"addVideoBlock",value:function(r,n){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var a,o,c,s,l,p;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.draft){i.next=14;break}return a=e(this.draft,2),o=a[0],c=a[1],i.next=6,this.createBlock(r);case 6:return s=i.sent,l=[].concat(t(n?c.blocks.filter(function(e){return e!==n}):c.blocks),[s]),p=new d.a(this.afs.firestore.batch()).append(new f.a(this.afs.collection("drafts").doc(o).ref,h.a.Update,{blocks:l,lastTime:u.a.firestore.FieldValue.serverTimestamp()})),n&&p.append(new f.a(this.afs.collection("blocks").doc(n).ref,h.a.Delete)),i.next=12,p.run();case 12:return this.draft[1].blocks=l,i.abrupt("return",s);case 14:case"end":return i.stop()}},i,this)}))}},{key:"saveDraft",value:function(t,r,n,i,o,c,s,u){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function a(){var d,f,h;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.draft){a.next=6;break}return d=e(this.draft,2),f=d[0],h=d[1],a.next=4,this.saveOldDraft(f,h,t,r,n,i,o,s,u);case 4:a.next=8;break;case 6:return a.next=8,this.saveNewDraft(t,r,n,i,o,c,s,u);case 8:this.router.navigateByUrl(u?"posts/pending":"/posts/draft");case 9:case"end":return a.stop()}},a,this)}))}},{key:"saveOldDraft",value:function(e,t,r,n,i,o,c,s,l){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function a(){var p,v,b,m,g,w,k,y,x=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(p=s.map(function(e){return e.id}),v=s.filter(function(e){return!t.blocks.includes(e.id)}),b=s.filter(function(e){return t.blocks.includes(e.id)&&e.isChangedHtml}),m=t.blocks.filter(function(e){return!p.includes(e)}),!(v.length>0)){a.next=10;break}return a.next=7,Promise.all(v.map(function(e){return x.createBlock(e)}));case 7:a.t0=a.sent,a.next=11;break;case 10:a.t0=[];case 11:return g=a.t0,v.forEach(function(e,t){return e.id=g[t]}),w=new d.a(this.afs.firestore.batch()),b.length>0&&b.forEach(function(e){return w.append(new f.a(x.afs.collection("blocks").doc(e.id).ref,h.a.Update,{html:e.html}))}),m.length>0&&m.forEach(function(e){return w.append(new f.a(x.afs.collection("blocks").doc(e).ref,h.a.Delete))}),k={lastTime:u.a.firestore.FieldValue.serverTimestamp()},r!==t.categoryId&&(k=Object.assign(Object.assign({},k),{categoryId:r})),n!==t.title&&(k=Object.assign(Object.assign({},k),{title:n})),i!==t.link&&(k=Object.assign(Object.assign({},k),{link:i||u.a.firestore.FieldValue.delete()})),o!==t.description&&(k=Object.assign(Object.assign({},k),{description:o||u.a.firestore.FieldValue.delete()})),c.join(",")!==t.tags.join(",")&&(k=Object.assign(Object.assign({},k),{tags:c})),((y=s.map(function(e){return e.id})).join(",")!==t.blocks.join(",")||v.length>0||b.length>0||m.length>0)&&(k=Object.assign(Object.assign({},k),{blocks:y})),(l&&!t.review||!l&&t.review)&&(k=Object.assign(Object.assign({},k),{review:l||null})),Object.keys(k).length>1&&w.append(new f.a(this.afs.collection("drafts").doc(e).ref,h.a.Update,k)),a.next=23,w.run();case 23:if(a.t1=a.sent,!a.t1){a.next=26;break}this.pending=void 0,this.drafts=void 0;case 26:case"end":return a.stop()}},a,this)}))}},{key:"saveNewDraft",value:function(e,t,r,n,i,o,c,s){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function a(){var d,f=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(c.map(function(e){return f.createBlock(e)}));case 2:return d=a.sent,a.t0=this.afs.collection("drafts"),a.t1=Object,a.t2=Object,a.t3=Object,a.t4=Object,a.t5=Object,a.next=11,this.authService.retrieveUser();case 11:if(a.t6=a.sent.id,a.t7=u.a.firestore.FieldValue.serverTimestamp(),a.t8=e,a.t9=t,a.t10={owner:a.t6,lastTime:a.t7,categoryId:a.t8,title:a.t9},a.t11=r?{link:r}:{},a.t12=a.t5.assign.call(a.t5,a.t10,a.t11),a.t13=n?{description:n}:{},a.t14=a.t4.assign.call(a.t4,a.t12,a.t13),a.t15={tags:i},a.t16=a.t3.assign.call(a.t3,a.t14,a.t15),!o){a.next=31;break}return a.t18=o,a.next=26,this.authService.retrieveConfig();case 26:a.t19=a.sent.cloudinary,a.t20={url:a.t18,provider:a.t19},a.t17={image:a.t20},a.next=32;break;case 31:a.t17={};case 32:return a.t21=a.t17,a.t22=a.t2.assign.call(a.t2,a.t16,a.t21),a.t23={blocks:d,review:s||null},a.t24=a.t1.assign.call(a.t1,a.t22,a.t23),a.next=38,a.t0.add.call(a.t0,a.t24);case 38:this.pending=void 0,this.drafts=void 0;case 40:case"end":return a.stop()}},a,this)}))}},{key:"removeDraftOrArticle",value:function(r,n,i,o,c){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function a(){var s,u,d,f=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.t0=this.article,!a.t0){a.next=5;break}return a.next=4,this.deleteArticle(this.article.id);case 4:a.t0=!a.sent;case 5:if(!a.t0){a.next=7;break}return a.abrupt("return",!1);case 7:return s=[],u=[],r.forEach(function(e,r){if(e.hash)u=[].concat(t(u),[[e.provider,e.hash]]);else{var n=r.split("/");s=[].concat(t(s),[[e.provider,n[n.length-1].replace(".jpg","").replace(".jpeg","").replace(".png","").replace(".webp","")]])}}),c&&!r.has(c.url)&&(d=c.url.split("/"),s=[].concat(t(s),[[c.provider,d[d.length-1].replace(".jpg","").replace(".jpeg","").replace(".png","").replace(".webp","")]])),n.forEach(function(e){if(!r.has(e.url)&&e.url&&e.provider)if(e.hash)u=[].concat(t(u),[[e.provider,e.hash]]);else{var n=e.url.split("/");s=[].concat(t(s),[[e.provider,n[n.length-1].replace(".jpg","").replace(".jpeg","").replace(".png","").replace(".webp","")]])}}),a.next=12,Promise.all([].concat(t(o&&o.videoLink&&o.shaGit?[this.imageService.removeVideo(o.videoLink.match(/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/g)[0],o.shaGit)]:[]),t(!i||o&&o.videoLink===i[0]?[]:[this.imageService.removeVideo(i[0].match(/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/g)[0],i[1])]),t(s.map(function(t){var r=e(t,2),n=r[0],i=r[1];return f.imageService.removeImage(i,n)})),t(u.map(function(t){var r=e(t,2),n=r[0],i=r[1];return f.imageService.removeGifImage(i,n)})),t(this.draft?[this.deleteDraft(this.draft[0],this.draft[1].blocks).run()]:[])));case 12:return this.draft?(this.drafts=void 0,this.router.navigateByUrl("/posts/draft")):this.article&&(this.article=void 0,this.approvedMap.clear(),this.router.navigateByUrl("/posts/approved")),a.abrupt("return",!0);case 14:case"end":return a.stop()}},a,this)}))}},{key:"deleteArticle",value:function(e){var t=this;return new Promise(function(r,n){return Object(a.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.http,t.t1="".concat(p.a.BASE_URL).concat(p.a.GetArticle.replace(":id",e)),t.next=4,this.authService.retrieveUser();case 4:t.t2=t.sent.token,t.t3={authorization:t.t2},t.t4={headers:t.t3},n=t.t0.delete.call(t.t0,t.t1,t.t4).subscribe(function(e){r(!0),n.unsubscribe()},function(e){r(!1),n.unsubscribe()});case 8:case"end":return t.stop()}},t,this)}))})}},{key:"deleteDraft",value:function(e,t){var r=this,n=new d.a(this.afs.firestore.batch()).append(new f.a(this.afs.collection("drafts").doc(e).ref,h.a.Delete));return t.forEach(function(e){n.append(new f.a(r.afs.collection("blocks").doc(e).ref,h.a.Delete))}),n}},{key:"removeCurrentDraft",value:function(){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.draft){t.next=7;break}return r=e(this.draft,2),n=r[0],i=r[1],t.next=4,this.deleteDraft(n,i.blocks).run();case 4:if(t.t0=t.sent,!t.t0){t.next=7;break}this.pending=void 0,this.drafts=void 0,this.draft=void 0;case 7:this.approvedMap.clear();case 8:case"end":return t.stop()}},t,this)}))}},{key:"removeCurrentArticle",value:function(){this.article=void 0,this.approvedMap.clear(),this.approvedMap.clear()}},{key:"rejectDraft",value:function(){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.draft){t.next=6;break}return r=e(this.draft,1),n=r[0],t.next=4,this.afs.collection("drafts").doc(n).update({review:null});case 4:this.pending=void 0,this.router.navigateByUrl("posts/pending");case 6:case"end":return t.stop()}},t,this)}))}},{key:"approve",value:function(e,t,r,n,i,o,c,s){var u=this;return new Promise(function(d,f){return Object(a.__awaiter)(u,void 0,void 0,regeneratorRuntime.mark(function a(){var u,f;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.authService.retrieveUser();case 2:u=a.sent,f=this.http.post("".concat(p.a.BASE_URL).concat(p.a.Post),{categoryId:e,link:r,title:t,description:n,tags:i,mainImage:o,blocks:c,review:s,owner:this.draft?this.draft[1].owner:u.id},{headers:{authorization:u.token}}).subscribe(function(e){d(e.data),f.unsubscribe()},function(e){d(void 0),f.unsubscribe()});case 4:case"end":return a.stop()}},a,this)}))})}},{key:"getAllApproved",value:function(e,t,r,n,i,o,c){var s=this;return new Promise(function(u,d){return Object(a.__awaiter)(s,void 0,void 0,regeneratorRuntime.mark(function a(){var s,d=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&this.approvedMap.clear(),!this.approvedMap.has(t)){a.next=4;break}u([this.totalApproved,this.approvedMap.get(t)]),a.next=13;break;case 4:return a.t0=this.http,a.t1="".concat(p.a.BASE_URL).concat(p.a.Articles),a.next=8,this.authService.retrieveUser();case 8:a.t2=a.sent.token,a.t3={authorization:a.t2},a.t4=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({perPage:v.a.PER_PAGE.toString(),page:t.toString()},r?{keyword:r.toString()}:{}),n?{fromDate:n.toISOString()}:{}),i?{toDate:i.toISOString()}:{}),o?{owner:o.toString()}:{}),c?{categoryId:c.toString()}:{}),a.t5={headers:a.t3,params:a.t4},s=a.t0.get.call(a.t0,a.t1,a.t5).subscribe(function(e){var r=e.data;d.approvedMap.set(t,r),d.totalApproved=e.total,u([e.total,r]),s.unsubscribe()},function(e){u([0,[]]),s.unsubscribe()});case 13:case"end":return a.stop()}},a,this)}))})}},{key:"updateArticle",value:function(r,n,i,o,c,s,u,d){return Object(a.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function a(){var f,h,l,p,v,b,m=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return f=[],h=[],u.forEach(function(e,r){if(r!==c.url&&s.every(function(e){return e.url!==r}))if(e.hash)h=[].concat(t(h),[[e.provider,e.hash]]);else{var n=r.split("/");f=[].concat(t(f),[[e.provider,n[n.length-1].replace(".jpg","").replace(".jpeg","").replace(".png","").replace(".webp","")]])}}),l=s.find(function(e){return"video"===e.type}),a.next=5,Promise.all([this.edit(r,n,i,o,c,s)].concat(t(!d||l&&l.videoLink===d[0]?[]:[this.imageService.removeVideo(d[0].match(/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/g)[0],d[1])]),t(f.map(function(t){var r=e(t,2),n=r[0],i=r[1];return m.imageService.removeImage(i,n)})),t(h.map(function(t){var r=e(t,2),n=r[0],i=r[1];return m.imageService.removeGifImage(i,n)}))));case 5:return p=a.sent,v=e(p,1),b=v[0],a.abrupt("return",b);case 9:case"end":return a.stop()}},a,this)}))}},{key:"edit",value:function(e,t,r,n,i,o){var c=this;return new Promise(function(s,u){return Object(a.__awaiter)(c,void 0,void 0,regeneratorRuntime.mark(function a(){var c,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.article&&(e!==this.article.title||t!==this.article.link||r!==this.article.description||n.join(",")!==this.article.tags.join(",")||i.url!==this.article.mainImage.url||JSON.stringify(o)!==JSON.stringify(this.article.blocks))){a.next=4;break}s(void 0),a.next=8;break;case 4:return a.next=6,this.authService.retrieveUser();case 6:c=a.sent,u=this.http.patch("".concat(p.a.BASE_URL).concat(p.a.GetArticle.replace(":id",this.article.id)),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e!==this.article.title?{title:e}:{}),t!==this.article.link?{link:t}:{}),r!==this.article.description?{description:r}:{}),n.join(",")!==this.article.tags.join(",")?{tags:n}:{}),i.url!==this.article.mainImage.url?{mainImage:i}:{}),JSON.stringify(o)!==JSON.stringify(this.article.blocks)?{blocks:o}:{}),{headers:{authorization:c.token}}).subscribe(function(e){s(!0),u.unsubscribe()},function(e){s(!1),u.unsubscribe()});case 8:case"end":return a.stop()}},a,this)}))})}},{key:"prefetch",value:function(e){var t=this.http.get("".concat(p.b.MAIN_BASE_URL).concat(p.b.Product.replace(":id",e))).subscribe(function(e){t.unsubscribe()},function(e){t.unsubscribe()})}}]),r}();return r.\u0275fac=function(e){return new(e||r)(b.Zb(m.a),b.Zb(g.a),b.Zb(c.a),b.Zb(l.a),b.Zb(w.c))},r.\u0275prov=b.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},wdqL:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(){var e=function e(){o(this,e)};return e.PER_PAGE=10,e.Abuse=[{id:1,content:"B\xecnh lu\u1eadn c\xf3 n\u1ed9i dung kh\xf4ng th\xedch h\u1ee3p"},{id:2,content:"N\u1ed9i dung qu\u1ea3ng c\xe1o kh\xf4ng mong mu\u1ed1n"},{id:3,content:"T\xe0i li\u1ec7u khi\xeau d\xe2m ho\u1eb7c phim khi\xeau d\xe2m"},{id:4,content:"X\xe2m h\u1ea1i tr\u1ebb em"},{id:5,content:"L\u1eddi n\xf3i c\u0103m th\xf9 ho\u1eb7c h\xecnh \u1ea3nh b\u1ea1o l\u1ef1c"},{id:6,content:"Qu\u1ea5y r\u1ed1i ho\u1eb7c b\u1eaft n\u1ea1t"}],e}()},zUnb:function(e,t,r){"use strict";r.r(t);var n,i=r("cUpR"),a=r("8Y7J"),c=r("SVse"),u=r("omvX"),d=r("aLe/"),f=r("rVqu"),h=r("iInd"),l=r("dgaq"),p=((n=function(){function e(t,r,n,i){o(this,e),this.router=t,this.iconSet=r,this.activatedRoute=n,this.titleService=i,r.icons=Object.assign({},l.a)}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.router.events.subscribe(function(t){t instanceof h.b&&(e.getChild(e.activatedRoute).data.subscribe(function(t){return e.titleService.setTitle("Admin - ".concat(t.title))}),window.scrollTo(0,0))})}},{key:"getChild",value:function(e){return e.firstChild?this.getChild(e.firstChild):e}}]),e}()).\u0275fac=function(e){return new(e||n)(a.Pb(h.c),a.Pb(f.c),a.Pb(h.a),a.Pb(i.c))},n.\u0275cmp=a.Jb({type:n,selectors:[["body"]],features:[a.Cb([f.c])],decls:1,vars:0,template:function(e,t){1&e&&a.Qb(0,"router-outlet")},directives:[h.h],encapsulation:2}),n),v=r("mrSG"),b=r("i0WE"),m=[{title:!0,name:"T\u1ed5ng k\u1ebft"},{name:"Trang ch\u1ee7",url:"/",icon:"icon-home"},{title:!0,name:"B\xe0i vi\u1ebft"},{name:"Th\xeam b\xe0i vi\u1ebft",url:"/create",icon:"icon-plus"},{name:"Nh\xe1p",url:"/posts/draft",icon:"icon-doc"},{name:"Ch\u1edd duy\u1ec7t",url:"/posts/pending",icon:"icon-directions"},{name:"\u0110\xe3 duy\u1ec7t",url:"/posts/approved",icon:"icon-list"},{name:"B\xe1o x\u1ea5u",url:"/banned",icon:"icon-ban"}],g=[{title:!0,name:"T\u1ed5ng k\u1ebft"},{name:"Trang ch\u1ee7",url:"/",icon:"icon-home"},{title:!0,name:"B\xe0i vi\u1ebft"},{name:"Th\xeam b\xe0i vi\u1ebft",url:"/create",icon:"icon-plus"},{name:"Nh\xe1p",url:"/posts/draft",icon:"icon-doc"},{name:"Ch\u1edd duy\u1ec7t",url:"/posts/pending",icon:"icon-directions"},{name:"\u0110\xe3 duy\u1ec7t",url:"/posts/approved",icon:"icon-list"}],w=r("Iluq"),k=r("FE24");function y(e,t){if(1&e){var r=a.Wb();a.Vb(0,"div",12),a.Vb(1,"div",13),a.Vb(2,"strong"),a.Fc(3,"T\xe0i kho\u1ea3n"),a.Ub(),a.Ub(),a.Vb(4,"a",14),a.cc("click",function(){return a.wc(r),a.fc().signout()}),a.Qb(5,"i",15),a.Fc(6," \u0110\u0103ng xu\u1ea5t"),a.Ub(),a.Ub()}}var x,R,_,j,O=function(){return["/"]},U=function(){return{src:"assets/img/brand/logo.svg",width:89,height:25,alt:"CoreUI Logo"}},S=function(){return{src:"assets/img/brand/sygnet.svg",width:30,height:30,alt:"CoreUI Logo"}},A=((x=function(){function e(t,r){var n=this;o(this,e),this.authService=t,this.router=r,this.sidebarMinimized=!1,this.navItems=m,this.authService.userChanges.subscribe(function(e){n.name=e&&e.name?e.name:"",e?(n.name=e.name,n.navItems=e.isAdmin?m:g):n.name=""})}return s(e,[{key:"toggleMinimize",value:function(e){this.sidebarMinimized=e}},{key:"signout",value:function(){return Object(v.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.logout();case 2:this.router.navigateByUrl("/login");case 3:case"end":return e.stop()}},e,this)}))}}]),e}()).\u0275fac=function(e){return new(e||x)(a.Pb(b.a),a.Pb(h.c))},x.\u0275cmp=a.Jb({type:x,selectors:[["app-dashboard"]],decls:17,vars:15,consts:[[3,"navbarBrandRouterLink","fixed","navbarBrandFull","navbarBrandMinimized","sidebarToggler","asideMenuToggler"],[1,"nav","navbar-nav","ml-auto",2,"margin-right","20px"],["dropdown","","placement","bottom right",1,"nav-item","dropdown"],["data-toggle","dropdown","href","#","role","button","aria-haspopup","true","aria-expanded","false","dropdownToggle","",1,"nav-link",3,"click"],[2,"font-weight","bold","color","black"],["class","dropdown-menu dropdown-menu-right","aria-labelledby","simple-dropdown",4,"dropdownMenu"],[1,"app-body"],[3,"fixed","display","minimized","minimizedChange"],["appSidebar",""],[3,"navItems","perfectScrollbar","disabled"],[1,"main"],[1,"container-fluid"],["aria-labelledby","simple-dropdown",1,"dropdown-menu","dropdown-menu-right"],[1,"dropdown-header","text-center"],["href","#",1,"dropdown-item",3,"click"],[1,"fa","fa-lock"]],template:function(e,t){if(1&e&&(a.Vb(0,"app-header",0),a.Vb(1,"ul",1),a.Vb(2,"div"),a.Fc(3,"Xin ch\xe0o\xa0"),a.Ub(),a.Vb(4,"li",2),a.Vb(5,"a",3),a.cc("click",function(){return!1}),a.Vb(6,"div",4),a.Fc(7),a.Ub(),a.Ub(),a.Dc(8,y,7,0,"div",5),a.Ub(),a.Ub(),a.Ub(),a.Vb(9,"div",6),a.Vb(10,"app-sidebar",7,8),a.cc("minimizedChange",function(e){return t.toggleMinimize(e)}),a.Qb(12,"app-sidebar-nav",9),a.Qb(13,"app-sidebar-minimizer"),a.Ub(),a.Vb(14,"main",10),a.Vb(15,"div",11),a.Qb(16,"router-outlet"),a.Ub(),a.Ub(),a.Ub()),2&e){var r=a.tc(11);a.lc("navbarBrandRouterLink",a.oc(12,O))("fixed",!0)("navbarBrandFull",a.oc(13,U))("navbarBrandMinimized",a.oc(14,S))("sidebarToggler","lg")("asideMenuToggler",!1),a.Db(7),a.Gc(t.name),a.Db(3),a.lc("fixed",!0)("display","lg")("minimized",t.sidebarMinimized),a.Db(2),a.lc("navItems",t.navItems)("disabled",r.minimized)}},directives:[w.c,k.a,k.d,k.b,w.e,w.h,d.a,w.f,h.h],encapsulation:2}),x),I=r("VRCc"),C=r("CNMR"),P=((j=function(){function e(t,r){o(this,e),this.router=t,this.authService=r}return s(e,[{key:"check",value:function(e){return Object(v.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.authService.retrieveUser();case 2:return r=t.sent,t.abrupt("return",r?!(["/banned","/secret"].includes(e)&&!r.isAdmin&&(this.router.navigateByUrl("/"),1)):(this.router.navigateByUrl("/login"),!1));case 4:case"end":return t.stop()}},t,this)}))}},{key:"canActivate",value:function(e,t){return this.check(t.url)}}]),e}()).\u0275fac=function(e){return new(e||j)(a.Zb(h.c),a.Zb(b.a))},j.\u0275prov=a.Lb({token:j,factory:j.\u0275fac,providedIn:"root"}),j),E=((_=function(){function e(t,r){o(this,e),this.router=t,this.authService=r}return s(e,[{key:"check",value:function(){return Object(v.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authService.retrieveUser();case 2:if(e.t0=!e.sent,e.t0){e.next=5;break}e.t0=(this.router.navigateByUrl("/"),!1);case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e,this)}))}},{key:"canActivate",value:function(e,t){return this.check()}}]),e}()).\u0275fac=function(e){return new(e||_)(a.Zb(h.c),a.Zb(b.a))},_.\u0275prov=a.Lb({token:_,factory:_.\u0275fac,providedIn:"root"}),_),B=((R=function e(){o(this,e)}).\u0275fac=function(e){return new(e||R)},R.\u0275cmp=a.Jb({type:R,selectors:[["ng-component"]],decls:11,vars:0,consts:[[1,"app","flex-row","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"clearfix"],[1,"float-left","display-3","mr-4"],[1,"pt-3"],[1,"text-muted"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Vb(1,"div",1),a.Vb(2,"div",2),a.Vb(3,"div",3),a.Vb(4,"div",4),a.Vb(5,"h1",5),a.Fc(6,"404"),a.Ub(),a.Vb(7,"h4",6),a.Fc(8,"Oops! You're lost."),a.Ub(),a.Vb(9,"p",7),a.Fc(10,"The page you are looking for was not found."),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub())},encapsulation:2}),R),V=["email"],L=["pass"];function F(e,t){if(1&e&&(a.Vb(0,"alert",21),a.Fc(1),a.Ub()),2&e){var r=a.fc();a.Db(1),a.Hc(" ",r.error," ")}}var M,D,T,z=[{path:"login",component:(M=function(){function e(t,r){o(this,e),this.authService=t,this.router=r,this.isLoading=!1}return s(e,[{key:"login",value:function(){return Object(v.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.authService.login(this.email.nativeElement.value,this.pass.nativeElement.value);case 3:if(!e.sent){e.next=7;break}this.router.navigateByUrl("/"),e.next=8;break;case 7:this.error="Email ho\u1eb7c m\u1eadt kh\u1ea9u kh\xf4ng \u0111\xfang",this.isLoading=!1;case 8:case"end":return e.stop()}},e,this)}))}}]),e}(),M.\u0275fac=function(e){return new(e||M)(a.Pb(b.a),a.Pb(h.c))},M.\u0275cmp=a.Jb({type:M,selectors:[["app-dashboard"]],viewQuery:function(e,t){var r;1&e&&(a.Ic(V,1),a.Ic(L,1)),2&e&&(a.sc(r=a.dc())&&(t.email=r.first),a.sc(r=a.dc())&&(t.pass=r.first))},decls:28,vars:2,consts:[[1,"app-body"],[1,"main","d-flex","align-items-center"],[1,"container"],[1,"row"],["id","box",1,"mx-auto"],[1,"card"],[1,"card-body"],[1,"text-muted"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"icon-user"],["type","text","placeholder","Email","autocomplete","username","required","",1,"form-control",3,"keyup.enter"],["email",""],[1,"input-group","mb-4"],[1,"icon-lock"],["type","password","placeholder","M\u1eadt kh\u1ea9u","autocomplete","current-password","required","",1,"form-control",3,"keyup.enter"],["pass",""],["type","danger",4,"ngIf"],[1,"text-center"],["type","button",1,"btn","btn-primary","px-4",3,"disabled","click"],["type","danger"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Vb(1,"main",1),a.Vb(2,"div",2),a.Vb(3,"div",3),a.Vb(4,"div",4),a.Vb(5,"div",5),a.Vb(6,"div",6),a.Vb(7,"form"),a.Vb(8,"h1"),a.Fc(9,"\u0110\u0103ng nh\u1eadp"),a.Ub(),a.Vb(10,"p",7),a.Fc(11,"\u0110\u0103ng nh\u1eadp v\xe0o t\xe0i kho\u1ea3n"),a.Ub(),a.Vb(12,"div",8),a.Vb(13,"div",9),a.Vb(14,"span",10),a.Qb(15,"i",11),a.Ub(),a.Ub(),a.Vb(16,"input",12,13),a.cc("keyup.enter",function(){return t.login()}),a.Ub(),a.Ub(),a.Vb(18,"div",14),a.Vb(19,"div",9),a.Vb(20,"span",10),a.Qb(21,"i",15),a.Ub(),a.Ub(),a.Vb(22,"input",16,17),a.cc("keyup.enter",function(){return t.login()}),a.Ub(),a.Ub(),a.Dc(24,F,2,1,"alert",18),a.Vb(25,"div",19),a.Vb(26,"button",20),a.cc("click",function(){return t.login()}),a.Fc(27," \u0110\u0103ng nh\u1eadp "),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&e&&(a.Db(24),a.lc("ngIf",void 0!==t.error),a.Db(2),a.lc("disabled",t.isLoading))},directives:[c.k,C.a],styles:["#box[_ngcontent-%COMP%]{width:400px}"]}),M),data:{title:"\u0110\u0103ng nh\u1eadp"},canActivate:[E]},{path:"",component:A,data:{title:"Home"},children:[{path:"",loadChildren:function(){return Promise.all([r.e(1),r.e(11)]).then(r.bind(null,"6dU7")).then(function(e){return e.DashboardModule})},canActivate:[P]},{path:"posts",loadChildren:function(){return Promise.all([r.e(2),r.e(3),r.e(1),r.e(10)]).then(r.bind(null,"jBxN")).then(function(e){return e.PostsModule})},canActivate:[P]},{path:"",loadChildren:function(){return Promise.all([r.e(2),r.e(3),r.e(1),r.e(9)]).then(r.bind(null,"HsMK")).then(function(e){return e.NewpostModule})},canActivate:[P]},{path:"",loadChildren:function(){return Promise.all([r.e(2),r.e(12)]).then(r.bind(null,"WVqY")).then(function(e){return e.SecretModule})},canActivate:[P]}]},{path:"**",component:B}],J=((D=function e(){o(this,e)}).\u0275fac=function(e){return new(e||D)},D.\u0275mod=a.Nb({type:D}),D.\u0275inj=a.Mb({imports:[[h.g.forRoot(z,{relativeLinkResolution:"legacy"})],h.g]}),D),N=r("2ZVE"),G=r("d2mR"),Z=r("jmUF"),W=r("LC/r"),Y={apiKey:"AIzaSyAz8_QhCv-LASvrswRsD-8kkjJyA3rCglA",authDomain:"prod-fanzone-admin.firebaseapp.com",projectId:"prod-fanzone-admin",storageBucket:"prod-fanzone-admin.appspot.com",messagingSenderId:"863658771489",appId:"1:863658771489:web:f0b0c8fbeb1a3d41324f60",measurementId:"G-J2ZJ71H83D"},q=r("kLt5"),Q=r("9ko8"),H=r("IheW"),K=r("qPgb"),X=r("JmXk"),$=r("Z93F"),ee=r("KM76"),te=((T=function e(){o(this,e)}).\u0275fac=function(e){return new(e||T)},T.\u0275mod=a.Nb({type:T,bootstrap:[p]}),T.\u0275inj=a.Mb({providers:[{provide:c.h,useClass:c.p},f.c,b.a,q.a,Q.a,ee.a,K.a,X.a,$.a,i.c],imports:[[H.b,i.a,u.b,J,w.a.forRoot(),w.b,w.d,w.g,d.b,k.c.forRoot(),N.a.forRoot(),f.a,f.b.forRoot(),G.a,Z.a.initializeApp(Y),I.b,W.b,C.b.forRoot()]]}),T);Object(a.U)(),i.d().bootstrapModule(te,{useJit:!0,preserveWhitespaces:!0}).catch(function(e){return console.log(e)})},zn8P:function(e,t){function r(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="zn8P"}},[[0,0,8]]])}();